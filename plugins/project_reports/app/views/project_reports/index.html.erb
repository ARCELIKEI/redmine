<div class="contextual">
<%= link_to(l(:label_project_report_new), {:action => 'new'}, :class => 'icon icon-add') if User.current.allowed_to?(:create_project_reports, @project) %>
</div>

<h2><%=l(:label_project_report_plural)%></h2>

<table class="list files">
  <thead><tr>
    <%= sort_header_tag('reporttitle', :caption => l(:field_report_title)) %>
    <%= sort_header_tag('reportdescription', :caption => l(:field_report_description), :default_order => 'desc') %>
    <%= sort_header_tag('reportuploaddate', :caption => l(:field_report_uploaddate), :default_order => 'desc') %>
    <%= sort_header_tag('reportsize', :caption => l(:field_filesize), :default_order => 'desc') %>
    <%= sort_header_tag('reportowner', :caption => l(:field_report_owner), :default_order => 'desc') %>
    <%= sort_header_tag('reporttype', :caption => l(:field_report_type), :default_order => 'desc') %>

    <th></th>
  </tr></thead>
  <tbody>


  <% @reports.each do |report| %>
  <tr class="file <%= cycle("odd", "even") %>">
    <td class="reporttitle"><%= link_to "#{report.title}", {:controller => 'project_reports', :action => 'download', :path => report.path}, :title => report.description %></td>
    <td class="reportdescription"><%= report.description %></td>
    <td class="filesize"><%= format_time(report.upload_date)%></td>
    <td class="downloads"><%=number_to_human_size(report.size)%></td>
    <td class="downloads"><%= User.find_by_id(report.owner_id) %></td>
    <td class="downloads"><%= Enumeration.find_by_id(report.type_id) %></td>

    <td align="center">
    <%= link_to(image_tag('delete.png'), {:action => 'delete', :report_id => report.id},
                                         :data => {:confirm => l(:text_are_you_sure)}) if (User.current.id == report.owner_id || User.current.admin) %>
    </td>
  </tr>
  <% end
  reset_cycle %>



  </tbody>
</table>

<% html_title(l(:label_project_report_plural)) -%>
